#include<iostream>
#include<string>
#define MAX 1000
using namespace std;
void showmenu();
void addperson(struct addressbook*);

typedef struct{
	string name;
	int sex;
	int age;
	string phone;
	string adrr;
}person;
typedef struct addressbook{
	person personA[MAX];
	int size;
}book,*pbook;
void showPerson(pbook);
int isExist(pbook,string);
void deletel(pbook);
void findl(pbook);
void modify(pbook);
void clean(pbook); 
int main(){
	book abs;
	abs.size=0;
	int select=0;
	
	while(1)

	{	
		showmenu();
		cin>>select;
		switch(select)
		{
			case 1:
				addperson(&abs);
				break;
			case 2:
				showPerson(&abs);
				break;
			case 3:
			deletel(&abs);
				
				
				break;
			case 4:
				findl(&abs);
				//查找联系人 
				break;
			case 5:
				modify(&abs);
				break;
			case 6:
				clean(&abs);
				break;
			case 0:
				system("cls");
				cout<<"欢迎下次使用"<<endl;
				return 0;
				break;
			default:
				break;
		}
		
	}

	

	system("pause");
	return 0;
}
void showmenu()
{	cout<<"*************************"<<endl;
	cout<<"***** 1、添加联系人 *****"<<endl;
	cout<<"***** 2、显示联系人 *****"<<endl;
	cout<<"***** 3、删除联系人 *****"<<endl;
	cout<<"***** 4、查找联系人 *****"<<endl;
	cout<<"***** 5、修改联系人 *****"<<endl;
	cout<<"***** 6、清空联系人 *****"<<endl;
	cout<<"***** 0、退出通讯录 *****"<<endl;
	cout<<"*************************"<<endl;
	
}
void addperson(pbook abs)
{	
	if(abs->size==MAX)
	{
		cout<<"通讯录已满，无法添加！"<<endl;
		return;
	}
	else
	{
		string name;
		cout<<"请输入姓名："<<endl;	
		cin>>name;
		abs->personA[abs->size].name=name;
		 
		cout<<"请输入性别"<<endl;
		cout<<"1---男"<<endl;
		cout<<"2---女"<<endl;	
		int sex=0;
		while(1)
		{
			cin>>sex;
			if(sex==1||sex==2)
			{
				abs->personA[abs->size].sex=sex;
				break;
			}
			cout<<"输入有误，请重新输入！"<<endl;
		}
		//年龄
		cout<<"请输入年龄"<<endl; 
		int age=0;
		cin>>age;
		abs->personA[abs->size].age=age;
		//联系电话
		cout<<"请输入联系电话"<<endl;
		string phone="";
		cin>>phone;
		abs->personA[abs->size].phone=phone;
		//家庭住址
		cout<<"请输入家庭住址"<<endl;
		string address="";
		cin>>address;
		abs->personA[abs->size].adrr=address;
		//+1
		abs->size++;
		cout<<"添加成功！"<<endl;
		system("pause"); 
		system("cls");//清理屏幕操作 
	} 
}
void showPerson(pbook abs)
{
	if(abs->size==0)
	{
		cout<<"当前通讯录记载人数为0"<<endl;
		system("pause");
		system("cls");
		return; 
	}
	else
	{
		for(int i=0;i<abs->size;i++)
		{
			cout<<"姓名："<<abs->personA[i].name<<"\t";
			
			cout<<"性别："<<(abs->personA[i].sex==1?"男":"女")<<"\t"; 
			cout<<"年龄："<<abs->personA[i].age<<"\t";
			cout<<"电话："<<abs->personA[i].phone<<"\t"; 
			cout<<"住址："<<abs->personA[i].adrr<<endl;	
		} 
	}
	system("pause");
	system("cls");
}
int isExist(pbook abs,string name)
{
	for(int i=0;i<abs->size;i++)
	{
		if(abs->personA[i].name==name)
		{
			return i;
		} 
	}
		return -1;
}
void deletel(pbook abs)
{
	cout<<"请输入您想要删除的联系人"<<endl;
	string name;
	cin>>name;
	int ret=isExist( abs,name);
	if(ret!=-1)
	{
		for(int i=ret;i<abs->size;i++)
		{
			abs->personA[i]=abs->personA[i+1];
			abs->size--;
		}
		cout<<"删除成功"<<endl;
		
	} 
	else
	{
		cout<<"查无此人"<<endl; 
	}
	system("pause");
	system("cls");
}
void findl(book* abs)
{
	cout<<"请输入查找的联系人的姓名"<<endl;
	string name;
	cin>>name;
	int ret=isExist(abs,name);
	if(ret!=-1)
	{
		cout<<"姓名："<<abs->personA[ret].name<<"\t";
		cout<<"性别："<<(abs->personA[ret].sex==1?"男":"女")<<"\t"; 
		cout<<"年龄："<<abs->personA[ret].age<<"\t";
		cout<<"电话："<<abs->personA[ret].phone<<"\t"; 
		cout<<"住址："<<abs->personA[ret].adrr<<endl;	
		
	} 
	else
	{
		cout<<"查无此人"<<endl; 
	}
	 system("pause");
	 system("cls");
}
void modify(pbook abs)
{
	cout<<"请输入要修改的联系人的姓名"<<endl;
	string name;
	cin>>name;
	int ret=isExist(abs,name);
	if(ret!=-1)
	{
		cout<<"请输入姓名"<<endl;
		string aname;
		cin>>aname;
		abs->personA[ret].name=aname;
		
		cout<<"请输入性别："<<endl;
		cout<<"1---男"<<endl;
		cout<<"2---女"<<endl;
		int sex=0;
		while(1)
		{
			cin>>sex;
			if(sex==1||sex==2)
			{
				abs->personA[abs->size].sex=sex;
				break;
			}
			cout<<"输入有误，请重新输入！"<<endl;
		}
		cout<<"年龄："<<endl; 
		int age1;
		cin>>age1;
		abs->personA[ret].age=age1;
		cout<<"电话："<<endl; 
		string phone;
		cin>>phone;
		abs->personA[ret].phone=phone;
		cout<<"住址："<<endl;	
		string adrr;
		cin>>adrr;
		abs->personA[ret].adrr=adrr;
		cout<<"修改成功！"<<endl;
	} 
	else
	{
		cout<<"查无此人"<<endl; 
	}
	 system("pause");
	 system("cls");
}
void clean(pbook abs)
{
	cout<<"确认清空吗？清空之后无法恢复（1--确认清空/2--撤销）"<<endl;
	int a;
	cin>>a;
	
	if(a==1)
	{
		abs->size=0;
		cout<<"联系人信息已经清空！"<<endl;
	}
	system("pause");
	system("cls");
//	return;
	
} 
